<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bitcraft Timer – Themed</title>
  <link rel="icon" href="./favicon.png" />
  <style>
    /* Styling unchanged from previous version */
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>BITCRAFT TIMER</h1>
      <p class="subtitle">Working duration, stamina usage & an optional end‑time alarm.</p>
      <div class="divider"></div>
    </header>

    <main class="calculator-grid">
      <!-- Inputs -->
      <section class="card">
        <div class="card-title">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2 2 7l10 5 10-5-10-5Zm0 7L2 4v13l10 5 10-5V4l-10 5Z"/></svg>
          <span>Working Parameters</span>
        </div>

        <label for="totalEffort">Total Effort <span class="help-label-totalEffort">( 1 )</span></label>
        <input id="totalEffort" type="number" min="0" step="1" placeholder="Enter total effort" />

        <label for="toolPower">Tool Power <span class="help-label-toolPower">( 2 )</span></label>
        <input id="toolPower" type="number" min="1" step="1" placeholder="Enter tool power" />

        <label for="delay">Delay (seconds) <span class="help-label-delay">( 3 )</span></label>
        <input id="delay" type="number" min="0" step="0.01" placeholder="e.g. 0.80" />

        <label for="tier">Item Tier <span class="help-label-tier">( 4 )</span></label>
        <select id="tier">
          <option value="">Select item tier…</option>
          <option value="1">Tier 1 (0.75 stamina/tick)</option>
          <option value="2">Tier 2 (0.89 stamina/tick)</option>
          <option value="3">Tier 3 (1.03 stamina/tick)</option>
          <option value="4">Tier 4 (1.16 stamina/tick)</option>
          <option value="5">Tier 5 (1.28 stamina/tick)</option>
          <option value="6">Tier 6 (1.41 stamina/tick)</option>
          <option value="7">Tier 7 (1.52 stamina/tick)</option>
          <option value="8">Tier 8 (1.64 stamina/tick)</option>
          <option value="9">Tier 9 (1.75 stamina/tick)</option>
          <option value="10">Tier 10 (1.86 stamina/tick)</option>
        </select>

        <label for="stamina">Max stamina (optional)</label>
        <input id="stamina" type="number" min="1" step="1" placeholder="Enter total stamina" />

        <button class="btn" onclick="calculateTime()">Calculate Working Time</button>
        <div id="error" class="error"></div>
      </section>

      <!-- Results -->
      <section id="result" class="card result-card">
        <div class="card-title">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20Zm1-14h-2v6l5 3 .99-1.71L13 12V8Z"/></svg>
          <span>Working Results</span>
        </div>

        <div id="timeDisplay" class="time-display"></div>
        <div id="secondsDisplay" class="seconds-display"></div>

        <!-- Alarm / Timer Controls -->
        <div class="alarm">
          <div class="alarm-row">
            <div class="inline">
              <input id="enableAlarm" type="checkbox" checked />
              <label for="enableAlarm" style="text-transform:none;letter-spacing:0;margin:0">Enable alarm when time is up</label>
            </div>
            <div class="inline">
              <label for="alarmVolume" class="muted" style="text-transform:none;margin:0">Volume</label>
              <input id="alarmVolume" type="range" min="0" max="1" step="0.01" value="0.85" />
            </div>
          </div>
          <div class="alarm-row" style="margin-top:10px; grid-template-columns: 1fr auto auto auto;">
            <button id="startBtn" class="btn" onclick="startTimer()">Start Timer</button>
            <button id="pauseBtn" class="btn btn-ghost" onclick="pauseTimer()" disabled>Pause</button>
            <button id="resetBtn" class="btn btn-ghost" onclick="resetTimer()" disabled>Reset</button>
            <button id="testSoundBtn" class="btn btn-ghost" onclick="testAlarm()">Test Sound</button>
          </div>
          <div id="countdownStatus" class="seconds-display" style="margin-top:6px"></div>
        </div>

        <div id="staminaAlert" class="stamina-alert" role="alert"></div>

        <div class="steps">
          <div class="step"><span class="step-label">Notches Required</span><span id="step1Value"></span></div>
          <div class="step"><span class="step-label">Total Time</span><span id="step2Value"></span></div>
          <div class="step"><span class="step-label">Stamina Info</span><span id="step3Value"></span></div>
        </div>
      </section>
    </main>

    <footer>
      <p>© 2025 Bitcraft Timer. UI theming inspired by the Bitcraft 2025 Roadmap.</p>
    </footer>
  </div>

  <!-- Alarm sound (replace src with your own if needed) -->
  <audio id="alarmAudio" preload="auto" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg"></audio>

  <script>
    // Script unchanged, still uses calculateTime and timer logic.
  </script>
</body>
</html>
